{% extends 'base.html' %}

{% block title %}Lịch Sử Ghi Âm - NGT Cough{% endblock %}

{% block content %}
<div class="history-container">
    <h2>Lịch sử các bản ghi âm của bạn</h2>
    
    {# Hiển thị thông báo nếu có #}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    {% if recordings %}
        <ul class="recording-list">
            {% for recording in recordings %}
                <li class="recording-item">
                    <div class="item-info">
                        <strong>Tên file:</strong> {{ recording.filename }} <br>
                        <strong>Ngày ghi:</strong> {{ recording.timestamp.strftime('%H:%M:%S ngày %d-%m-%Y') }}
                    </div>
                    <div class="item-player">
                        {# Đường dẫn tới file trong thư mục uploads #}
                        <audio controls src="/uploads/{{ recording.filename }}"></audio>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Bạn chưa có bản ghi âm nào. Hãy đến trang Chẩn Đoán để bắt đầu!</p>
    {% endif %}
</div>
{% endblock %}